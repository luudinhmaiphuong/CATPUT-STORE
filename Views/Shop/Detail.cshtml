@using CatputStore.Models
@model CatputStore.Models.ProductDetailViewModel

<div style="max-width:1100px; margin: 0 auto; padding: 0 40px;">

    <div class="detail-container" style="display:flex;gap:40px;padding-top:40px;">

        <div class="image-box" style="flex:1;">
            <img src="@Model.Product.ImageUrl" alt="@Model.Product.Name" style="width:100%;box-shadow:0 4px 12px rgba(0,0,0,0.1);" />
        </div>

        <div class="info-box" style="flex:1;">
            <h1 style="font-size:28px;font-weight:700;">@Model.Product.Name</h1>

            <div style="margin:15px 0;">
                <span style="font-size:24px;color:#e63946;font-weight:700;">
                    @Model.Product.Price.ToString("N0")đ
                </span>
                <span style="text-decoration:line-through;margin-left:10px;color:#777;">
                    @Model.Product.OldPrice.ToString("N0")đ
                </span>
            </div>

            <p style="margin:10px 0;font-size:16px;color:#333;">
                Danh mục:
                <strong>@Model.Product.Category</strong>
            </p>

            <div style="margin:10px 0;font-size:18px;color:#f4a261; display:flex; align-items:center;">
                @for (int i = 0; i < 5; i++)
                {
                    <span style="@(i < Model.Product.Rating ? "color:#f4a261;" : "color:#e0e0e0;")">⭐</span>
                }
            </div>

            <p style="margin:20px 0;font-size:15px;line-height:1.4;color:#666;">
                @Model.Product.ShortDescription
            </p>

            <div style="margin-top:20px; display:flex; align-items:center; gap:10px;">
                <label for="quantity" style="font-size:15px; color:#444;">Số lượng:</label>
                <input type="number" id="quantity" name="quantity" value="1" min="1" max="99" style="width:60px; padding:8px; border:1px solid #ccc; text-align:center;">
                <button onclick="changeQuantity(-1)" style="padding:8px 12px; background:#f0f0f0; border:1px solid #ccc; cursor:pointer;">-</button>
                <button onclick="changeQuantity(1)" style="padding:8px 12px; background:#f0f0f0; border:1px solid #ccc; cursor:pointer;">+</button>
            </div>

            <div style="margin-top:30px; display:flex; gap:15px;">
                <button style="display:inline-block;padding:12px 25px;background:#FCA1B3;color:#fff;border-radius:5px;text-decoration:none;border:none;cursor:pointer;font-size:16px;font-weight:600;">
                    THÊM VÀO GIỎ HÀNG
                </button>
                <button style="display:inline-block;padding:12px 25px;background:#F16480;color:#fff;border-radius:5px;text-decoration:none;border:none;cursor:pointer;font-size:16px;font-weight:600;">
                    MUA NGAY
                </button>
            </div>

            <a href="/shop" style="display:inline-block;padding:10px 18px;color:#FF7CA8;text-decoration:none;margin-top:20px; border:1px solid #eee;">
                ← Quay lại cửa hàng
            </a>
        </div>
    </div>

    <hr style="border: none; border-top: 1px solid #eee; margin: 40px 0;" />

    <div style="padding-bottom: 20px;">
        <h3 class="detail-description-title" style="font-size:22px;font-weight:700;margin-bottom:15px;">MÔ TẢ CHI TIẾT</h3>
        <p style="font-size:15px;line-height:1.6;color:#444; white-space: pre-line;">
            @Model.Product.Description
        </p>
    </div>

    <hr style="border: none; border-top: 1px solid #eee; margin: 40px 0;" />

    <h2 style="font-size: 24px; font-weight: 700; margin-top: 50px; margin-bottom: 20px;">SẢN PHẨM TƯƠNG TỰ</h2>

    @if (Model.RelatedProducts != null && Model.RelatedProducts.Any())
    {
        <div style="display: flex; gap: 20px; overflow-x: auto; padding-bottom: 40px;">
            @foreach (var item in Model.RelatedProducts)
            {
                <div style="flex: 0 0 250px; border: 0px solid #eee; overflow: hidden; text-align: center; transition: box-shadow 0.3s ease, transform 0.3s ease;"
                     onmouseover="this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)'; this.querySelector('.related-img').style.transform='scale(1.1)';"
                     onmouseout="this.style.boxShadow='0 2px 5px rgba(0,0,0,0.05)'; this.querySelector('.related-img').style.transform='scale(1.0)';">

                    <a href="/shop/detail/@item.Id" style="text-decoration: none; color: inherit;">

                        <div style="position: relative; overflow: hidden; height: 250px;">
                            <span style="position: absolute; top: 10px; left: 10px; background: #F16480; color: white; padding: 4px 8px; border-radius: 3px; font-size: 12px; font-weight: bold; z-index: 1;">Giảm giá!</span>

                            <img src="@item.ImageUrl" alt="@item.Name"
                                 class="related-img"
                                 style="width: 100%; height: 100%; object-fit: cover; border-bottom: 1px solid #eee; transition: transform 0.5s ease;">
                        </div>

                        <div style="padding: 15px; text-align: center;">

                            <p style="font-size: 14px; color: #555; margin-bottom: 5px; text-align: left;">@item.Category</p>
                            <h4 style="font-size: 16px; font-weight: 600; margin-bottom: 5px; height: 40px; overflow: hidden; text-align: left;">@item.Name</h4>

                            <div style="margin: 10px 0;">
                                <span style="font-size: 18px; color: #e63946; font-weight: 700;">@item.Price.ToString("N0")đ</span>
                                <span style="text-decoration: line-through; margin-left: 10px; color: #777; font-size: 14px;">@item.OldPrice.ToString("N0")đ</span>
                            </div>

                            <div style="color:#f4a261; margin-bottom: 15px; display: inline-block;">
                                @for (int i = 0; i < 5; i++)
                                {
                                    <span style="@(i < item.Rating ? "color:#f4a261;" : "color:#e0e0e0;")">⭐</span>
                                }
                            </div>
                        </div>
                    </a>

                    <button style="width: 100%; padding: 12px 0; background: #FCA1B3; color: white; border: none; font-size: 15px; cursor: pointer; border-radius: 0; text-transform: uppercase;">
                        THÊM VÀO GIỎ HÀNG
                    </button>
                </div>
            }
        </div>
    }

</div>

<script>
    function changeQuantity(change) {
        var quantityInput = document.getElementById('quantity');
        var currentValue = parseInt(quantityInput.value);
        var newValue = currentValue + change;

        if (newValue >= 1 && newValue <= 20) { // Giới hạn số lượng từ 1 đến 20
            quantityInput.value = newValue;
        }
    }
</script>